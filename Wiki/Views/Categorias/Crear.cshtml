@model MVC_Entity_Framework.Models.Categoria

@{
    ViewData["Title"] = "Crear";
}

<h1>Crear</h1>

<h4>Categoria</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form >
            <input id="userid" type="number" value="5" hidden />
            <div class="form-group">
                <label asp-for="Name" class="control-label"></label>
                <input id="Nombre" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input class="form-check-input" asp-for="Activa" /> @Html.DisplayNameFor(model => model.Activa)
                </label>
            </div>
            <div class="form-group">
                <label asp-for="Descripcion" class="control-label"></label>
                <input id="Descripcion" class="form-control" />
                
                <span asp-validation-for="Descripcion" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input  id="post" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

<script>
    (function () {
        const userid = localStorage.getItem("userid")
        const useristag = document.getElementById("userid")
        const post = document.getElementById("post")
        const nombre = document.getElementById("Nombre")
        const descripcion = document.getElementById("Descripcion")
        post.addEventListener("click", function (e) {
            e.preventDefault()
            console.log("log post", descripcion.value)
            fetch("/Categorias/NeuvaCategoria", {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ userid: userid, descripcion: descripcion.value, nombre: nombre.value })
            }).then(res => {
                console.log(res)
                window.location.href="/categorias";
            }).then(e => {
                console.log(e)
            })
        })
        console.log("usertag", useristag.value)
        if (userid) {

        }
    })()
</script>